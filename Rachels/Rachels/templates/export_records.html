{% extends "base.html" %}
{% block title %}Export Records{% endblock %}
{% block content %}
<div class="page-card" style="max-width:980px;margin:0 auto;padding:22px">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px;flex-wrap:wrap">
    <div style="display:flex;gap:12px;align-items:center">
      <div style="width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent-600),var(--accent));color:#fff;font-weight:800">R</div>
      <div>
        <div style="font-weight:800">Record Manager</div>
        <div class="muted" style="font-size:13px">Export orders to Excel</div>
      </div>
    </div>

    <div style="display:flex;gap:8px;align-items:center">
      <a href="{% url 'show_all_records' %}" class="btn">All Records</a>
      <a href="{% url 'add_record' %}" class="btn primary">Add Record</a>
    </div>
  </div>

  <h2 style="margin-top:6px;color:var(--accent-600)">Export Orders</h2>
  <div class="muted">Select a date range (From â€” To). Optionally filter by location or status before exporting.</div>

  {% if messages %}
    <div style="margin-top:12px">
      {% for message in messages %}
        <div style="background:rgba(181,90,72,0.06);padding:10px;border-radius:10px;color:#7a2b20;margin-bottom:8px;font-weight:700">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <form method="get" action="{% url 'export_csv' %}" style="display:grid;gap:14px;margin-top:14px;max-width:760px">
    <div style="display:flex;gap:12px;flex-wrap:wrap">
      <div style="flex:1;min-width:160px">
        <label for="from_date" style="font-weight:700;color:var(--accent)">From date</label>
        <input id="from_date" name="from_date" type="date" value="{{ initial.from_date }}" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(11,11,11,0.08);background:#fff" />
      </div>

      <div style="flex:1;min-width:160px">
        <label for="to_date" style="font-weight:700;color:var(--accent)">To date</label>
        <input id="to_date" name="to_date" type="date" value="{{ initial.to_date }}" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(11,11,11,0.08);background:#fff" />
      </div>

      <div style="flex:1;min-width:160px">
        <label for="location" style="font-weight:700;color:var(--accent)">Location</label>
        <select id="location" name="location" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(11,11,11,0.08);background:#fff">
          <option value="">All locations</option>
          <option value="Dulari" {% if initial.location == "Dulari" %}selected{% endif %}>Dulari</option>
          <option value="Pours and Plates" {% if initial.location == "Pours and Plates" %}selected{% endif %}>Pours and Plates</option>
          <option value="Rachels" {% if initial.location == "Rachels" %}selected{% endif %}>Rachels</option>
        </select>
      </div>

      <div style="flex:1;min-width:150px">
        <label for="status" style="font-weight:700;color:var(--accent)">Status</label>
        <select id="status" name="status" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(11,11,11,0.08);background:#fff">
          <option value="">Any</option>
          <option value="Pending" {% if initial.status == "Pending" %}selected{% endif %}>Pending</option>
          <option value="Completed" {% if initial.status == "Completed" %}selected{% endif %}>Completed</option>
        </select>
      </div>
    </div>

    <div style="display:flex;gap:10px;align-items:center;margin-top:6px">
      <button type="submit" class="btn primary" style="padding:10px 16px;border-radius:10px;font-weight:800">Download CSV</button>
      <a href="{% url 'export_form' %}" class="btn" style="background:transparent;border:1px solid rgba(11,11,11,0.06)">Reset</a>
      <div style="margin-left:auto;color:var(--muted);font-size:13px">Tip: leave dates empty to export all</div>
    </div>
  </form>
</div>
{% endblock %}